<div class="row ">
    <div class="col-11">
    <h1 class="md-display-3">Company Settings</h1>
    </div>
    <div class="col-1.5 ">
      <button mat-raised-button style="float: right;" routerLink="/employeehome" style="background-color:forestgreen" >
        <mat-icon style="color:white">home</mat-icon> Home
    </button>
    </div>
</div>

<div class= "col-md-6 offset-md-3"> 
  <div class="settings-form-flex" > 
    <mat-card  style="width: 100%" *ngIf="editCompany; else editCompanyInfo">
      <form [formGroup]="editCompanyData" (ngSubmit)="SaveCompanyInfo()" >
      <mat-card-title>
        Company Information
      </mat-card-title>
      <mat-card-content>
        <div class="form-group">
          <mat-form-field class="w-100">
            <mat-label>Name</mat-label>
            <input matInput formControlName="Name">
          </mat-form-field>
        </div>
        <div class="form-group">
          <mat-form-field class="w-100">
            <mat-label>Contact</mat-label>
            <input matInput  formControlName="ContactNo">
          </mat-form-field>
        </div>
        <div class="form-group">
          <mat-form-field class="w-100">
            <mat-label>Address</mat-label>
            <input matInput formControlName="Address">
          </mat-form-field>
        </div>
  
      </mat-card-content>
      <mat-card-actions>
        <div class="button-flex-container" style="float: right;">
          <button mat-raised-button color="light" type="button" (click)="cancel()">Cancel</button>
          <button mat-raised-button style="background-color:forestgreen; color:white"  type="submit">Save</button>
        </div>
      </mat-card-actions>
    </form>
    </mat-card>
  </div>

  <br>

  <div class="settings-form-flex" >
    <mat-card  style="width: 100%" *ngIf="editTime; else editTimeSlots">
      <form>
        <mat-card-title>
          Time Slots 
        </mat-card-title>
        <mat-card-content>
          <form [formGroup]="editTimes" (ngSubmit)="SaveTimeslot()">
            <ng-container formArrayName="times">
              <div *ngFor="let x of editTimes.get('times')['controls']; let j = index" >
                <div [formGroupName]="j">
                  <table class="example-full-width" cellspacing="0">
                    <tr>
                      <td><strong>{{j+1}}</strong></td>
                      <input hidden readonly matInput formControlName="timeid">
                      <td>
                        <mat-form-field class="w-100">
                          <mat-label>Start Time</mat-label>
                          <input readonly matInput formControlName="startTime">
                        </mat-form-field>
                      </td>
                      <td>
                        <mat-form-field class="example-full-width">
                        <mat-label>End Time</mat-label>
                        <input matInput readonly formControlName="endTime">
                        </mat-form-field>
                      </td>
                      <td>                   
                        <section class="example-section">
                          <mat-checkbox class="example-margin" formControlName="available">Available</mat-checkbox>           
                        </section>
                      </td>
                      </tr>
                    </table>
                  </div>
                  </div>
              </ng-container>
          </form>
        </mat-card-content>
        <mat-card-actions>
          <div class="button-flex-container" style="float: right;">
            <button mat-raised-button color="light" type="button" (click)="cancel()">Cancel</button>
            <button mat-raised-button style="background-color:forestgreen; color:white"  type="submit">Save</button>
          </div>
        </mat-card-actions>
      </form>
    </mat-card>
  
  </div>

  <br>
  <div class="settings-form-flex" > 
    <mat-card  style="width: 100%" *ngIf="editSocial; else SocialsEdit">
      <mat-card-title>
        Social Media Links
      </mat-card-title>
      <mat-card-content>
        <button mat-button color="primary" (click)="AddForm()">Add Link</button>
        <br>
        <form [formGroup]="editSocials" (ngSubmit)="saveLinks()">
          <ng-container formArrayName="links">
            <div *ngFor="let x of editSocials.get('links')['controls']; let j = index" >
              <div [formGroupName]="j">
                <table class="example-full-width">
                  <tr>
                    <input hidden  matInput formControlName="socialid">
                    <td>
                      <mat-form-field class="w-100">
                        <mat-label>Social Media Name</mat-label>
                        <input placeholder="example: Facebook"  matInput formControlName="name">
                      </mat-form-field>
                    </td>
                    <td>
                      <mat-form-field class=" w-100">
                      <mat-label>Link</mat-label>
                      <input matInput placeholder="provide link to your social media" formControlName="link">
                      </mat-form-field>
                    </td>
                    </tr>
                  </table>
                </div>
                </div>
            </ng-container>
        </form>
      </mat-card-content>
      <mat-card-actions>
        <div class="button-flex-container">
          <button mat-raised-button color="light" type="button" (click)="cancel()">Cancel</button>
          <button mat-raised-button style="background-color:forestgreen; color:white"  type="submit">Save</button>
        </div>
      </mat-card-actions>
    </mat-card>
  </div>


 <!--Template for Company Information--> 
 <ng-template #editCompanyInfo>
  <mat-card  style="width: 100%">
    <mat-card-title>
      Company Information
    </mat-card-title>
    <mat-card-content>
      <div class="row">
        <div class="col-6 form-group">
          <strong>Name: {{CompanyInfo?.Name}} </strong>
          <label name="Name"></label>
        </div>
        <div class="col-6 form-group">
          <strong>Contact: {{CompanyInfo?.ContactNo}} </strong>
          <label name="Contact"></label>
        </div>
    </div>
      <div class="form-group">
          <strong>Address: {{CompanyInfo?.Address}}</strong>
          <label name="Address"></label>
      </div>

    </mat-card-content>
    <mat-card-actions>
      <div class="button-flex-container">
        <button mat-raised-button style="background-color:forestgreen; color:white" (click)="EditCompanyInfo(CompanyInfo)">Edit</button>
      </div>
    </mat-card-actions>
  </mat-card>
 </ng-template>

 <ng-template #editTimeSlots>
  <mat-card  style="width: 100%">
    <mat-card-title>
      Time Slots
    </mat-card-title>
    <mat-card-content>
      <div class="row" *ngFor="let x of TimesList">
        <div class="col-1 form-group">
          <strong>{{x.TimeID}} </strong>
          <label name="Name"></label>
        </div>
        <div class="col-3 form-group">
          <label name="Name"><strong>Start Time: </strong>
            {{x.StartTime}}
          </label>
        </div>
        <div class="col-3 form-group">
          <label name="Name"><strong>End Time: </strong>
            {{x.EndTime}}
          </label>
        </div>
    
        <div class="col-3 form-group">
          <label name="Name"><strong>Available: </strong>
            {{x.Available}}
          </label>
        </div>
      </div>

    </mat-card-content>
    <mat-card-actions>
      <div class="button-flex-container">
        <button mat-raised-button style="background-color:forestgreen; color:white"  (click)="EditTimeSlots()">Edit</button>
      </div>
    </mat-card-actions>
  </mat-card>
 </ng-template>

 <ng-template #SocialsEdit>
  <mat-card  style="width: 100%">
    <mat-card-title>
      Social Media Links
    </mat-card-title>
    <mat-card-content>
      <div class="row" *ngFor="let x of Links">
        <div class="col-1 form-group">
          <p></p>
        </div>
        <div class="col-3 form-group">
          <label name="Name"><strong>Name: </strong>
            {{x.Name}}
          </label>
        </div>
        <div class="col-3 form-group">
          <label name="Name"><strong>Link: </strong>
            {{x.Link}}
          </label>
        </div>
      </div>
      <div *ngIf="Links?.length == 0">
        <br>
        <button mat-raised-button (click)="AddSocialMedia()">Add Social Media Link</button>
      </div>
    </mat-card-content>
    <mat-card-actions>
      <div class="button-flex-container" *ngIf="Links?.length>0">
        <button mat-raised-button style="background-color:forestgreen; color:white" (click)="EditTimeSlots()">Edit</button>
      </div>
    </mat-card-actions>
  </mat-card>
  <br>
 </ng-template>
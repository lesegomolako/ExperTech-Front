<div class="row ">
    <div class="col-11">
    <h1 class="md-display-3">Company Settings</h1>
    </div>
    <div class="col-1.5 ">
      <button mat-raised-button style="float: right;" routerLink="/employeehome" style="background-color:forestgreen" >
        <mat-icon style="color:white">home</mat-icon> Home
    </button>
    </div>
</div>

<div class= "col-md-6 offset-md-3"> 
  <div class="settings-form-flex" > 
    <mat-card  style="width: 100%" *ngIf="editCompany; else editCompanyInfo">
      <form [formGroup]="editCompanyData" (ngSubmit)="SaveCompanyInfo()" >
      <mat-card-title>
        Company Information
      </mat-card-title>
      <mat-card-content>
        <div class="form-group">
          <mat-form-field class="w-100">
            <mat-label>Name</mat-label>
            <input matInput formControlName="Name">
          </mat-form-field>
        </div>
        <div class="form-group">
          <mat-form-field class="w-100">
            <mat-label>Contact</mat-label>
            <input matInput  formControlName="ContactNo">
          </mat-form-field>
        </div>
        <div class="form-group">
          <mat-form-field class="w-100">
            <mat-label>Address</mat-label>
            <input matInput formControlName="Address">
          </mat-form-field>
        </div>
  
      </mat-card-content>
      <mat-card-actions>
        <div class="button-flex-container">
          <button mat-raised-button color="light" type="button" (click)="cancel()">Cancel</button>
          <button mat-raised-button color="primary" type="submit">Save</button>
        </div>
      </mat-card-actions>
    </form>
    </mat-card>
  </div>

  <br>

  <div class="settings-form-flex" >
    <mat-card  style="width: 100%" *ngIf="editTime; else editTimeSlots">
      <form>
        <mat-card-title>
          Time Slots 
        </mat-card-title>
        <mat-card-content>
          <form [formGroup]="editTimes">
            <ng-container formArrayName="times">
              <div *ngFor="let x of editTimes.get('times')['controls']; let j = index" >
                <div [formGroupName]="j">
                  <table class="example-full-width" cellspacing="0">
                    <tr>
                      <td>
                        <mat-form-field class="w-100">
                          <mat-label>Name</mat-label>
                          <input matInput formControlName="Name">
                        </mat-form-field>
                      </td>
                      <td>
                        <mat-form-field class="example-full-width">
                        <mat-label>Quantity</mat-label>
                        <input matInput min=0 type="number" formControlName="quantity">
                        </mat-form-field></td>
                        <button type="button" *ngIf="editTimes.get('stockitemlines')['controls'].length>1" class="btn btn-danger" (click)="DeleteForm(j)"><span class="glyphicon glyphicon-trash"></span></button>
                      </tr>
                    </table>
                  </div>
                  </div>
              </ng-container>
          </form>
        </mat-card-content>
        <mat-card-actions>
          <div class="button-flex-container">
            <button mat-raised-button color="light" type="button" (click)="cancel()">Cancel</button>
            <button mat-raised-button color="primary" (click)="SaveCompanyInfo()">Save</button>
          </div>
        </mat-card-actions>
      </form>
    </mat-card>
  
  </div>

  <br>
  <div class="settings-form-flex" > 
    <mat-card  style="width: 100%" *ngIf="editCompany; else editCompanyInfo">
      <mat-card-title>
        Company Information
      </mat-card-title>
      <mat-card-content>
        <div class="form-group">
          <strong>Name: </strong>
          <mat-form-field>
            <input matInput>
          </mat-form-field>
        </div>
        <div class="form-group">
           <strong>Contact: </strong>
           <label name="Contact"></label>
        </div>
        <div class="form-group">
            <strong>Address: </strong>
            <label name="Address"></label>
        </div>
      </mat-card-content>
      <mat-card-actions>
        <div class="button-flex-container">
          <button mat-raised-button color="primary" (click)="SaveCompanyInfo()">Save</button>
        </div>
      </mat-card-actions>
    </mat-card>
  </div>


 <!--Template for Company Information--> 
 <ng-template #editCompanyInfo>
  <mat-card  style="width: 100%">
    <mat-card-title>
      Company Information
    </mat-card-title>
    <mat-card-content>
      <div class="row">
        <div class="col-6 form-group">
          <strong>Name: {{CompanyInfo?.Name}} </strong>
          <label name="Name"></label>
        </div>
        <div class="col-6 form-group">
          <strong>Contact: {{CompanyInfo?.ContactNo}} </strong>
          <label name="Contact"></label>
        </div>
    </div>
      <div class="form-group">
          <strong>Address: {{CompanyInfo?.Address}}</strong>
          <label name="Address"></label>
      </div>

    </mat-card-content>
    <mat-card-actions>
      <div class="button-flex-container">
        <button mat-raised-button color="primary" (click)="EditCompanyInfo(CompanyInfo)">Edit</button>
      </div>
    </mat-card-actions>
  </mat-card>
 </ng-template>

 <ng-template #editTimeSlots>
  <mat-card  style="width: 100%">
    <mat-card-title>
      Time Slots
    </mat-card-title>
    <mat-card-content>
      <div class="row" *ngFor="let x of TimesList">
        <div class="col-1 form-group">
          <strong>{{x.TimeID}} </strong>
          <label name="Name"></label>
        </div>
        <div class="col-3 form-group">
          <label name="Name"><strong>Start Time: </strong>
            {{x.StartTime}}
          </label>
        </div>
        <div class="col-3 form-group">
          <label name="Name"><strong>End Time: </strong>
            {{x.EndTime}}
          </label>
        </div>
    
        <div class="col-3 form-group">
          <label name="Name"><strong>Available: </strong>
            {{x.Available}}
          </label>
        </div>
      </div>

    </mat-card-content>
    <mat-card-actions>
      <div class="button-flex-container">
        <button mat-raised-button color="primary" (click)="EditTimeSlots()">Edit</button>
      </div>
    </mat-card-actions>
  </mat-card>
 </ng-template>